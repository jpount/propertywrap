<% content_for :title do %>Maps<% end %>

<div class="layout layout-stack-sm layout-main-left">

  <div class="col-sm-4 col-sm-push-8 layout-sidebar">

        <% @response['property']['propertyPhotoList'].each do |image| %>
    <div class="well text-center">
        <img src="<%= image['mediumPhotoUrl'] %>">
    </div> <!-- /.well -->
    <% end %>

  </div> <!-- /.layout-sidebar -->



  <div class="col-sm-8 col-sm-pull-4 layout-main">

    <div class="well text-center">
      <img src="https://maps.googleapis.com/maps/api/streetview?size=300x200&location=<%= @response['property']['coordinate']['latitude'] %>,<%= @response['property']['coordinate']['longitude'] %>&heading=90&fov=180"/>

    </div> <!-- /.well -->

    <div class="well text-center">
      <img src="https://maps.googleapis.com/maps/api/staticmap?center=<%= @response['property']['coordinate']['latitude'] %>,<%= @response['property']['coordinate']['longitude'] %>&zoom=17&size=300x200&markers=color:black%7Clabel:S%7C-33.86623652,151.20202839">
    </div>

    <script>

        var map;
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(45.518970, -122.672899),
                zoom: 18,
                mapTypeId: google.maps.MapTypeId.SATELLITE,
                heading: 90,
                tilt: 45
            };
            map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
        }

        function rotate90() {
            var heading = map.getHeading() || 0;
            map.setHeading(heading + 90);
        }

        function autoRotate() {
            // Determine if we're showing aerial imagery
            if (map.getTilt() != 0) {
                window.setInterval(rotate90, 3000);
            }
        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>

    <br>

    <div class="portlet">

      <h4>Property</h4>

      <div class="list-group">

        <a href="javascript:;" class="list-group-item">
          Bedrooms
          <span class="badge badge-primary"><%= @response['property']['attributes']['bedrooms'] %></span>
        </a>
        <a href="javascript:;" class="list-group-item">
          Bathrooms
          <span class="badge badge-primary"><%= @response['property']['attributes']['bathrooms'] %></span>
        </a>
        <a href="javascript:;" class="list-group-item">
          Car spaces
          <span class="badge badge-primary"><%= @response['property']['attributes']['carSpaces'] %></span>
        </a>
        <a href="javascript:;" class="list-group-item">
          Land size
          <span class="badge badge-primary"><%= @response['property']['attributes']['landArea'] %> sqm</span>
        </a>
        <a href="javascript:;" class="list-group-item">
          Property Type
          <span class="badge badge-primary"><%= @response['property']['propertyType'] %></span>
        </a>

      </div> <!-- /.list-group -->


      <h4>Rental listings</h4>


      <div class="list-group">
        <% @response['property']['forRentPropertyCampaignList'].each do |rental| %>

            <a href="javascript:;" class="list-group-item">
              <%= rental['agent']['agent'] %>
              <span class="badge badge-primary"><%= rental['priceDescription'] %></span>
            </a>
        <% end %>
      </div> <!-- /.list-group -->
    </div> <!-- /.portlet -->

  </div> <!-- /.col -->

</div> <!-- /.row -->
